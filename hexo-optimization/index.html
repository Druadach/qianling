<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic%7CZCOOL+XiaoWei:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/fontawesome/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"qianling.pw","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"none","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>
<meta name="description" content=".post-body .note{padding-top:50px;} .s-fc-hd{color:#2aa198;border-bottom:2.2px solid #8c8c8c;padding:0 3% 5.1px 1%;} .f-fw{font-weight:bold;color:#3a87ad;} .s-fc-a{color:#1a95a5;}">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo 优化汇总">
<meta property="og:url" content="https://qianling.pw/hexo-optimization/index.html">
<meta property="og:site_name" content="千灵">
<meta property="og:description" content=".post-body .note{padding-top:50px;} .s-fc-hd{color:#2aa198;border-bottom:2.2px solid #8c8c8c;padding:0 3% 5.1px 1%;} .f-fw{font-weight:bold;color:#3a87ad;} .s-fc-a{color:#1a95a5;}">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qianling.pw/images/covers/90.jpg">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization1.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization2.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization3.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization4.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization5.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization6.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization7.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization8.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization9.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization10.png">
<meta property="article:published_time" content="2017-07-30T00:56:08.000Z">
<meta property="article:modified_time" content="2021-11-29T03:55:10.000Z">
<meta property="article:author" content="千灵夙赋">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qianling.pw/images/covers/90.jpg">


<link rel="canonical" href="https://qianling.pw/hexo-optimization/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://qianling.pw/hexo-optimization/","path":"hexo-optimization/","title":"Hexo 优化汇总"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo 优化汇总 | 千灵</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141264217-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-141264217-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?b95f636e57f871a4ea1faeae2b4f30e5"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="千灵" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">千灵</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-flower fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-cookie fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-acorn fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-play"><a href="/play/" rel="section"><i class="fa fa-fish fa-fw"></i>游戏</a></li>
        <li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="fa fa-dog fa-fw"></i>留言</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-carrot fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>
<script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

<div class="top-scroll-bar"></div>

<!-- 点击特效 -->
<canvas class="fireworks" id="canvas" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"><\/script> <script type="text/javascript" src="/js/custom/fireworks.js"><\/script>');
}
</script>

<!-- 动态背景 -->
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/jquery.backstretch.min.js"><\/script>');
}
</script>
<script type="text/javascript">
  $("body").backstretch([
    "/images/background/background (1).webp",
    "/images/background/background (2).webp",
    "/images/background/background (3).webp",
    "/images/background/background (4).webp",
    "/images/background/background (5).webp",
    "/images/background/background (6).webp",
    "/images/background/background (7).webp",
    "/images/background/background (8).webp",
  ], {duration: 60000, fade: 1000, animateFirst: true});
</script>

<!-- live2d -->
<div id="waifu">
  <div class="waifu-tips" style="opacity: 0;"></div>
  <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
</div>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/live2d/live2d.js"><\/script> <script type="text/javascript" src="/live2d/waifu-tips.js"><\/script>');
}
</script>

<!-- 打字礼花及震动特效 -->
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/activate-power-mode.js"><\/script>');
}
</script>
<script>
    POWERMODE.colorful = true; // ture 为启用礼花特效
    POWERMODE.shake = false; // false 为禁用震动特效
    document.body.addEventListener('input', POWERMODE);
</script>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%AE%BE%E5%AE%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6"><span class="nav-text">1. 设定自定义文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-CNPM"><span class="nav-text">2. CNPM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Hexo-%E9%A1%B5%E9%9D%A2%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0"><span class="nav-text">3. Hexo 页面自动刷新</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-InstantClick"><span class="nav-text">4. InstantClick</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%8E%8B%E7%BC%A9"><span class="nav-text">5. 压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-Gulp"><span class="nav-text">5.1. Gulp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-hexo-neat"><span class="nav-text">5.2. hexo-neat</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Service-Worker"><span class="nav-text">6. Service Worker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E6%96%87%E7%AB%A0%E5%8F%8A%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2"><span class="nav-text">7. 批处理脚本自动创建文章及一键部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E6%A0%B9%E6%8D%AE%E9%82%AE%E7%AE%B1%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%84%E8%AE%BA%E5%A4%B4%E5%83%8F"><span class="nav-text">8. 根据邮箱自定义评论头像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E4%BF%AE%E6%94%B9%E5%88%86%E7%B1%BB%E5%B1%82%E7%BA%A7%E6%98%BE%E7%A4%BA"><span class="nav-text">9. 修改分类层级显示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-%E4%BF%AE%E6%94%B9-post-njk"><span class="nav-text">9.1. 修改 post.njk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-%E4%BF%AE%E6%94%B9-custom-styl"><span class="nav-text">9.2. 修改 custom.styl</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E6%B7%BB%E5%8A%A0%E6%A0%87%E9%A2%98%E5%BA%95%E9%83%A8%E6%A8%AA%E7%BA%BF"><span class="nav-text">10. 添加标题底部横线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-%E4%BF%AE%E6%94%B9%E9%A1%B5%E8%84%9A%E6%96%87%E5%AD%97"><span class="nav-text">11. 修改页脚文字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-%E8%AE%BE%E7%BD%AE%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87"><span class="nav-text">12. 设置背景图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-%E5%8E%BB%E9%99%A4-more-%E6%A0%87%E7%AD%BE"><span class="nav-text">13. 去除 #more 标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-%E8%AE%B0%E5%BF%86%E6%B5%8F%E8%A7%88%E4%BD%8D%E7%BD%AE"><span class="nav-text">14. 记忆浏览位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-%E4%BF%AE%E6%94%B9%E9%A1%B5%E5%AE%BD"><span class="nav-text">15. 修改页宽</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-%E5%88%86%E7%B1%BB%E5%92%8C%E6%A0%87%E7%AD%BE%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%B9%B4%E4%BB%BD"><span class="nav-text">16. 分类和标签界面显示年份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-%E4%BF%AE%E6%94%B9-category-njk"><span class="nav-text">16.1. 修改 category.njk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-%E4%BF%AE%E6%94%B9-tag-njk"><span class="nav-text">16.2. 修改 tag.njk</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-%E6%BB%9A%E5%8A%A8%E6%9D%A1%E7%BE%8E%E5%8C%96"><span class="nav-text">17. 滚动条美化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-%E7%95%85%E8%A8%80%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96"><span class="nav-text">18. 畅言加载优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-%E7%95%85%E8%A8%80%E5%8E%BB%E7%89%88%E6%9D%83"><span class="nav-text">19. 畅言去版权</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD"><span class="nav-text">20. 代码块复制功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#20-1-%E4%B8%8B%E8%BD%BD-clipboard-js"><span class="nav-text">20.1. 下载 clipboard.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-%E6%8F%92%E5%85%A5-JavaScript"><span class="nav-text">20.2. 插入 JavaScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-3-%E5%BC%95%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6"><span class="nav-text">20.3. 引入自定义文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-4-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%A2%98"><span class="nav-text">20.4. 添加主题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-%E6%96%87%E6%9C%AB%E7%BB%93%E6%9D%9F%E6%A0%87%E8%AE%B0"><span class="nav-text">21. 文末结束标记</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88"><span class="nav-text">22. 鼠标点击特效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-%E4%BE%A7%E8%BE%B9%E6%A0%8F%E6%B7%BB%E5%8A%A0-APlayer"><span class="nav-text">23. 侧边栏添加 APlayer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0-live2d"><span class="nav-text">24. 页面添加 live2d</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-%E6%B7%BB%E5%8A%A0-Mob-%E5%88%86%E4%BA%AB"><span class="nav-text">25. 添加 Mob 分享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6"><span class="nav-text">26. 文章置顶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#26-1-%E4%BF%AE%E6%94%B9-generator-js"><span class="nav-text">26.1. 修改 generator.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-2-%E5%9B%BE%E6%A0%87%E7%BE%8E%E5%8C%96"><span class="nav-text">26.2. 图标美化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27-Local-Search-%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB%E4%BF%AE%E6%94%B9"><span class="nav-text">27. Local Search 加载动画修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28-Star-rating-%E4%BF%AE%E6%94%B9"><span class="nav-text">28. Star rating 修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29-%E7%82%B9%E5%87%BB%E4%BE%A7%E6%A0%8F%E4%BB%A5%E5%A4%96%E5%8C%BA%E5%9F%9F%E6%97%B6%E5%85%B3%E9%97%AD%E4%BE%A7%E6%A0%8F"><span class="nav-text">29. 点击侧栏以外区域时关闭侧栏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30-%E9%98%85%E8%AF%BB%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="nav-text">30. 阅读进度条</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-%E8%AF%84%E8%AE%BA%E8%BE%93%E5%85%A5%E6%89%93%E5%AD%97%E7%A4%BC%E8%8A%B1%E5%8F%8A%E9%9C%87%E5%8A%A8%E7%89%B9%E6%95%88"><span class="nav-text">31. 评论输入打字礼花及震动特效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-Valine-%E9%82%AE%E4%BB%B6%E6%8F%90%E9%86%92"><span class="nav-text">32. Valine 邮件提醒</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-Valine-%E5%8C%BF%E5%90%8D%E4%BF%AE%E6%94%B9"><span class="nav-text">33. Valine 匿名修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-%E6%8A%98%E5%8F%A0%E5%8A%9F%E8%83%BD"><span class="nav-text">34. 折叠功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-%E4%BF%AE%E6%94%B9%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE%E5%9B%BE%E6%A0%87"><span class="nav-text">35. 修改返回顶部按钮图标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-%E6%96%87%E7%AB%A0%E6%8C%89%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F"><span class="nav-text">36. 文章按更新时间排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-post-meta-item-%E4%BF%AE%E6%94%B9"><span class="nav-text">37. post-meta-item 修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#37-1-%E8%AF%84%E8%AE%BA%E6%95%B0%E5%A2%9E%E5%8A%A0%E8%B6%85%E9%93%BE%E6%8E%A5"><span class="nav-text">37.1. 评论数增加超链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-2-Valine-%E6%B1%89%E5%8C%96"><span class="nav-text">37.2. Valine 汉化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-3-%E5%8E%BB%E9%99%A4%E5%86%92%E5%8F%B7"><span class="nav-text">37.3. 去除冒号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-%E5%BD%92%E6%A1%A3%E9%A1%B5%E8%8B%B1%E6%96%87%E6%A0%87%E7%82%B9%E4%BF%AE%E6%94%B9"><span class="nav-text">38. 归档页英文标点修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#38-1-%E5%B0%86%E8%8B%B1%E6%96%87%E6%84%9F%E5%8F%B9%E5%8F%B7%E4%BF%AE%E6%94%B9%E4%B8%BA%E4%B8%AD%E6%96%87%E6%84%9F%E5%8F%B9%E5%8F%B7"><span class="nav-text">38.1. 将英文感叹号修改为中文感叹号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38-2-%E6%96%87%E6%9C%AC%E4%BF%AE%E6%94%B9"><span class="nav-text">38.2. 文本修改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-text">39. 图片懒加载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#39-1-Next-%E4%B8%BB%E9%A2%98%E8%87%AA%E5%B8%A6%E6%8F%92%E4%BB%B6"><span class="nav-text">39.1. Next 主题自带插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-2-Hexo-%E6%8F%92%E4%BB%B6-%E2%91%A0"><span class="nav-text">39.2. Hexo 插件 ①</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-3-Hexo-%E6%8F%92%E4%BB%B6-%E2%91%A1"><span class="nav-text">39.3. Hexo 插件 ②</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#41-%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8-FontAwesome"><span class="nav-text">41. 本地调用 FontAwesome</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="千灵夙赋"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">千灵夙赋</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">187</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">55</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Friends
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://meow3.family.blog/" title="https:&#x2F;&#x2F;meow3.family.blog&#x2F;" rel="noopener" target="_blank">恶魔菌の记事簿</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://lanyundev.vercel.app/" title="https:&#x2F;&#x2F;lanyundev.vercel.app&#x2F;" rel="noopener" target="_blank">LanYun</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://raspii.tech/" title="https:&#x2F;&#x2F;raspii.tech&#x2F;" rel="noopener" target="_blank">无用挂件</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.julydate.com/" title="https:&#x2F;&#x2F;www.julydate.com&#x2F;" rel="noopener" target="_blank">七夏浅笑</a>
        </li>
    </ul>
  </div>
<div id="aplayer" class="aplayer"></div>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/APlayer.min.js"><\/script>');
}
</script>
<script type="text/javascript">
var ap = new APlayer({
    element: document.getElementById('aplayer'),                       // Optional, player element
    narrow: false,                                                     // Optional, narrow style
    autoplay: false,                                                    // Optional, autoplay song(s), not supported by mobile browsers
    showlrc: 0,                                                        // Optional, show lrc, can be 0, 1, 2, see: ###With lrc
    mutex: true,                                                       // Optional, pause other players when this player playing
    theme: '#e6d0b2',                                                  // Optional, theme color, default: #b7daff
    mode: 'random',                                                    // Optional, play mode, can be `random` `single` `circulation`(loop) `order`(no loop), default: `circulation`
    preload: 'metadata',                                               // Optional, the way to load music, can be 'none' 'metadata' 'auto', default: 'auto'
    listmaxheight: '513px',                                             // Optional, max height of play list
    music: [{
      title: '世末歌者',
      author: '双笙 囧菌',
      url: '/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.mp3',
      pic: '/images/aplayer/双笙　囧菌 - 世末歌者.webp',
    }, {
      title: '幹物女(WeiWei)',
      author: '封茗囧菌',
      url: '/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).mp3',
      pic: '/images/aplayer/封茗囧菌 - 幹物女(WeiWei).webp',
    }, {
      title: '东京不太热',
      author: '封茗囧菌',
      url: '/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%9C%E4%BA%AC%E4%B8%8D%E5%A4%AA%E7%83%AD.mp3',
      pic: '/images/aplayer/封茗囧菌 - 东京不太热.webp',
    }, {
      title: '有故事的小仙女（Cover 初音ミク）',
      author: '井宿',
      url: '/music/%E4%BA%95%E5%AE%BF%20-%20%E6%9C%89%E6%95%85%E4%BA%8B%E7%9A%84%E5%B0%8F%E4%BB%99%E5%A5%B3%EF%BC%88Cover%20%E5%88%9D%E9%9F%B3%E3%83%9F%E3%82%AF%EF%BC%89.mp3',
      pic: '/images/aplayer/井宿 - 有故事的小仙女（Cover 初音ミク）.webp',
    }, {
      title: '拼凑的断音（Cover 洛天依）',
      author: '泡泡Hansy',
      url: '/music/%E6%B3%A1%E6%B3%A1Hansy%20-%20%E6%8B%BC%E5%87%91%E7%9A%84%E6%96%AD%E9%9F%B3%EF%BC%88Cover%20%E6%B4%9B%E5%A4%A9%E4%BE%9D%EF%BC%89.mp3',
      pic: '/images/aplayer/泡泡Hansy - 拼凑的断音（Cover 洛天依）.webp',
    }]
  });
</script>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-chevron-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qianling.pw/hexo-optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="千灵夙赋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="千灵">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hexo 优化汇总
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-30 08:56:08" itemprop="dateCreated datePublished" datetime="2017-07-30T08:56:08+08:00">2017-07-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-11-29 11:55:10" itemprop="dateModified" datetime="2021-11-29T11:55:10+08:00">2021-11-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a>
        </span>
    </span>

  
    <span id="/hexo-optimization/" class="post-meta-item leancloud_visitors" data-flag-title="Hexo 优化汇总" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    <a title="valine" href="/hexo-optimization/#valine-comments" itemprop="discussionUrl">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">评论数</span>
  
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-optimization/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img data-src="/images/covers/90.jpg"></p>

<style>
.post-body .note{padding-top:50px;}
.s-fc-hd{color:#2aa198;border-bottom:2.2px solid #8c8c8c;padding:0 3% 5.1px 1%;}
.f-fw{font-weight:bold;color:#3a87ad;}
.s-fc-a{color:#1a95a5;}
</style>


<span id="more"></span>

<hr>
<blockquote class="blockquote-center">
<p><span style="font-size:18px;font-weight:600;color:grey">~o( =∩ω∩= )m</span></p>

</blockquote>

<h2 id="1-设定自定义文件"><a href="#1-设定自定义文件" class="headerlink" title="1. 设定自定义文件"></a><span class="section-number">1.</span> <span class="s-fc-hd">设定自定义文件</span></h2><p><span class="f-fw">打开　</span><code>\blog\_config.next.yml</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  header: source/_data/header.njk</span><br><span class="line">  sidebar: source/_data/sidebar.njk</span><br><span class="line">  variable: source/_data/variables.styl</span><br><span class="line">  mixin: source/_data/mixins.styl</span><br><span class="line">  style: source/_data/styles.styl</span><br><span class="line">  custom: source/_data/custom.js</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开文件夹　</span><code>\blog\source</code></p>
<p><span class="f-fw">新建文件夹　</span><code>_data</code></p>
<p><span class="f-fw">在 _data 文件夹内新建文件　</span><code>header.njk</code>、<code>sidebar.njk</code>、<code>variables.styl</code>、<code>mixins.styl</code>、<code>styles.styl</code>、<code>custom.js</code></p>
<br/>

<h2 id="2-CNPM"><a href="#2-CNPM" class="headerlink" title="2. CNPM"></a><span class="section-number">2.</span> <span class="s-fc-hd">CNPM</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://npm.taobao.org/">淘宝 NPM 镜像</a>
</span></div>

<p>这是一个完整 <strong>npmjs.org</strong> 镜像，你可以用此代替官方版本（只读），同步频率目前为 10 分钟 一次以保证尽量与官方服务器同步。</p>
<p>在 <strong>npm</strong> 无法同步时提供帮助。</p>
<p><span class="f-fw">打开命令行窗口</span></p>
<p><span class="f-fw">安装　</span><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>
<p><span class="f-fw">指令</span></p>
<p><strong># 安装模块</strong></p>
<p>从 <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 安装所有模块。当安装的时候发现安装的模块还没有同步过来，淘宝 NPM 会自动在后台进行同步，并且会让你从官方 NPM <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 进行安装。下次你再安装这个模块的时候，就会直接从 淘宝 NPM 安装了。</p>
<p><code>$ cnpm install [name]</code></p>
<p><strong># 同步模块</strong></p>
<p>直接通过 <code>sync</code> 命令马上同步一个模块, 只有 <code>cnpm</code> 命令行才有此功能:</p>
<p><code>$ cnpm sync connect</code></p>
<p>当然, 你可以直接通过 web 方式来同步: <a href="https://npm.taobao.org/sync/connect"> /sync/connect </a></p>
<p><code>$ open https://npm.taobao.org/sync/connect</code></p>
<p><strong># 其它命令</strong></p>
<p>支持 <code>npm</code> 除了 <code>publish</code> 之外的所有命令, 如:</p>
<p><code>$ cnpm info connect</code></p>
<br/>

<h2 id="3-Hexo-页面自动刷新"><a href="#3-Hexo-页面自动刷新" class="headerlink" title="3. Hexo 页面自动刷新"></a><span class="section-number">3.</span> <span class="s-fc-hd">Hexo 页面自动刷新</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://moxfive.xyz/2016/03/27/hexo-browsersync/">MOxFIVE</a>
</span></div>
<p>经常本地调试 Hexo 主题, 如果有工具能监视文件更改幷自动刷新页面，那一定能提高不少效率，Browsersync 就是这样一款浏览器同步测试工具。</p>
<p><span class="f-fw">安装　</span></p>
<p>在Hexo根目录下运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g browser-sync</span><br><span class="line">npm install hexo-browsersync --save</span><br></pre></td></tr></table></figure>
<p>安装后像往常一样执行 <code>hexo s</code> 开启本地服务器，当相关文件被修改或者保存时，关联的浏览器页面会自带刷新</p>
<p><span class="f-fw">不足</span></p>
<ul>
<li> 变动后将重新加载整个页面，不能局部刷新</li>
<li> 使用 Hexo 自带服务器时，无法在移动端调试</li>
<li> md 文件过大时界面无法加载</li>
</ul>
<br/>

<h2 id="4-InstantClick"><a href="#4-InstantClick" class="headerlink" title="4. InstantClick"></a><span class="section-number">4.</span> <span class="s-fc-hd">InstantClick</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">刘兴刚博客</a>
</span></div>

<p><strong>Next 主题 现已集成 quicklink</strong></p>
<p>通常，我们为了减少 <strong>DNS</strong> 的查询时间，使用 <strong>dns prefetch</strong> 为该页面中的链接做解析，提升页面的加载速度。类似的，我们可以在鼠标滑到链接上到点击的时间间隙去加载这个页面，通常这个间隙有几百毫秒，利用 <strong>InstantClick</strong>，我们可以充分利用这几百毫秒，让网站能够瞬间显示新页面，几乎没有延迟。</p>
<p>但是 <strong>InstantClick</strong> 并不能滥用，许多 <strong>js</strong> 无法与它兼容，如<strong>谷歌分析</strong>、<strong>百度统计</strong>以及 <strong>fancybox</strong>。</p>
<p>初始化并解决部分 <strong>js</strong> 无法加载的问题：</p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_partials\head.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;\js\custom\instantclick.min.js&quot;</span> data-no-instant&gt;&lt;/script&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-no-instant</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   InstantClick.on(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">isInitialLoad</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="keyword">if</span> (isInitialLoad === <span class="literal">false</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     <span class="keyword">if</span> (<span class="keyword">typeof</span> MathJax !== <span class="string">&#x27;undefined&#x27;</span>) <span class="comment">// support MathJax</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">     MathJax.Hub.Queue([<span class="string">&quot;Typeset&quot;</span>,MathJax.Hub]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     <span class="keyword">if</span> (<span class="keyword">typeof</span> prettyPrint !== <span class="string">&#x27;undefined&#x27;</span>) <span class="comment">// support google code prettify</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">     prettyPrint();</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     <span class="keyword">if</span> (<span class="keyword">typeof</span> _hmt !== <span class="string">&#x27;undefined&#x27;</span>)  <span class="comment">// support 百度统计</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">     _hmt.push([<span class="string">&#x27;_trackPageview&#x27;</span>, location.pathname + location.search]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     <span class="keyword">if</span> (<span class="keyword">typeof</span> ga !== <span class="string">&#x27;undefined&#x27;</span>)  <span class="comment">// support google analytics</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">       ga(<span class="string">&#x27;send&#x27;</span>, <span class="string">&#x27;pageview&#x27;</span>, location.pathname + location.search);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   InstantClick.init();</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="http://instantclick.io/v3.1.0/instantclick.min.js">instantclick.min.js</a></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\custom\</code></p>
<p><span class="f-fw">放置　</span><code>instantclick.min.js</code></p>
<p>这时候对于所有链接都开启<strong>预加载模式</strong>，但可以把部分链接加入黑名单：<br><code>&lt;a href=&quot;\blog\&quot; data-no-instant&gt;Blog&lt;/a&gt;</code></p>
<br/>

<h2 id="5-压缩"><a href="#5-压缩" class="headerlink" title="5. 压缩"></a><span class="section-number">5.</span> <span class="s-fc-hd">压缩</span></h2><h3 id="5-1-Gulp"><a href="#5-1-Gulp" class="headerlink" title="5.1. Gulp"></a>5.1. Gulp</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a>
</span></div>
<p><strong>gulp.js</strong> 是基于流的自动化构建工具，我们可以使用 <strong>Gulp</strong> 为 Hexo 压缩文件</p>
<p><span class="f-fw">在 \blog\ 打开命令行窗口</span></p>
<p><span class="f-fw">安装</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">再根据需要安装以下模块</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-minify-css --save</span><br><span class="line">npm install gulp-uglify --save</span><br><span class="line">npm install gulp-htmlmin --save</span><br><span class="line">npm install gulp-htmlclean --save</span><br><span class="line">npm install gulp-imagemin --save</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\</code></p>
<p><span class="f-fw">新建　</span><code>gulpfile.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-imagemin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩html文件</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-html&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">  .pipe(htmlclean())</span><br><span class="line">  .pipe(htmlmin(&#123;</span><br><span class="line">  <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩css文件</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-css&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./public/**/*.css&#x27;</span>)</span><br><span class="line">  .pipe(minifycss())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩js文件</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-js&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">&#x27;./public/**/.js&#x27;</span>,<span class="string">&#x27;!./public/js/**/*min.js&#x27;</span>])</span><br><span class="line">  .pipe(uglify())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩 public/images 目录内图片</span></span><br><span class="line">gulp.task(<span class="string">&#x27;minify-images&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">&#x27;./public/images/**/*.*&#x27;</span>)</span><br><span class="line">  .pipe(imagemin(&#123;</span><br><span class="line">     <span class="attr">optimizationLevel</span>: <span class="number">5</span>, <span class="comment">//类型：Number  默认：3  取值范围：0-7（优化等级）</span></span><br><span class="line">     <span class="attr">progressive</span>: <span class="literal">true</span>, <span class="comment">//类型：Boolean 默认：false 无损压缩jpg图片</span></span><br><span class="line">     <span class="attr">interlaced</span>: <span class="literal">false</span>, <span class="comment">//类型：Boolean 默认：false 隔行扫描gif进行渲染</span></span><br><span class="line">     <span class="attr">multipass</span>: <span class="literal">false</span>, <span class="comment">//类型：Boolean 默认：false 多次优化svg直到完全优化</span></span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">&#x27;./public/uploads&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 默认任务 gulp 4.0 适用的方式</span></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, gulp.parallel(<span class="string">&#x27;minify-html&#x27;</span>, <span class="string">&#x27;minify-css&#x27;</span>, <span class="string">&#x27;minify-js&#x27;</span>, <span class="string">&#x27;minify-images&#x27;</span></span><br><span class="line"> <span class="comment">//build the website</span></span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">依照格式，删除未安装模块的代码部分</span></p>
<p><span class="f-fw">在命令行内输入 <code>$ gulp</code> 即可运行</span></p>
<p><span class="f-fw">一键同步代码参照　<a href="#7"><span class="s-fc-a">7. 批处理脚本自动创建文章及一键部署</span></a></span></p>
<p><span class="f-fw">把因删除空格缩小的间距调整回来：</span></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// gulp 间距调整</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.leancloud-visitors-count</span>, <span class="selector-tag">span</span><span class="selector-class">.post-comments-count</span><span class="selector-class">.valine-comment-count</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">i</span><span class="selector-class">.fa</span><span class="selector-class">.fa-ravelry</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br />

<h3 id="5-2-hexo-neat"><a href="#5-2-hexo-neat" class="headerlink" title="5.2. hexo-neat"></a>5.2. hexo-neat</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://blog.csdn.net/lewky_liu/article/details/82432003">Hexo瞎折腾系列(5) - 使用hexo-neat插件压缩页面静态资源</a>
</span></div>

<p><strong>已知 BUG：</strong></p>
<ul>
<li>  <strong>压缩 md 文件会使 markdown 语法的代码块消失</strong></li>
<li>  <strong>会删除全角空格</strong></li>
</ul>
<p><span class="f-fw">安装　</span><code>npm install hexo-neat --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="comment"># 开关</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩 html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.md&#x27;</span></span><br><span class="line"><span class="comment"># 压缩 css</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line"><span class="comment"># 压缩 js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;**/jquery.fancybox.pack.js&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;**/index.js&#x27;</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="6-Service-Worker"><a href="#6-Service-Worker" class="headerlink" title="6. Service Worker"></a><span class="section-number">6.</span> <span class="s-fc-hd">Service Worker</span></h2><div class="note info"><span class="f-fw">
教程　<a class="s-fc-a" href="https://qianling.pw/service-worker/">Hexo 部署 Service Worker</a>
</span></div>

<div class="f-fw">

<p>Service workers 本质上充当 Web 应用程序与浏览器之间的代理服务器，为了适应越来越多的网页应用而产生。</p>
<p>它可以通过拦截并修改访问和资源请求，缓存特定的网页资源，并可以将网页做到离线可用；</p>
<p>同时 Service Workers 也能做到定期后台同步与信息推送。</p>
<p>部署成功后，您可以节省用户流量、提升页面二次加载速度等。</p>
</div>

<br/>

<h2 id="7-批处理脚本自动创建文章及一键部署"><a href="#7-批处理脚本自动创建文章及一键部署" class="headerlink" title="7. 批处理脚本自动创建文章及一键部署"></a><span class="section-number">7.</span> <span class="s-fc-hd"><a id="7"></a>批处理脚本自动创建文章及一键部署</span></h2><p><span class="f-fw">打开　</span><code>\blog\</code></p>
<p><span class="f-fw">新建　</span><code>新建文章.bat</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="string">&quot;a=%date:~,4%&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">&quot;b=%date:~5,2%&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">&quot;c=%date:~8,2%&quot;</span></span><br><span class="line">hexo new <span class="string">&quot;%a%-%b%-%c%&quot;</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">命名格式为　<code>年-月-日.md</code></span></p>
<p><span class="f-fw">部署可写为　</span><code>hexo clean &amp; hexo g -d</code></p>
<p><span class="f-fw">若使用 gulp 则写为　</span><code>hexo clean &amp; hexo g &amp;&amp; gulp &amp; hexo deploy</code></p>
<br/>

<h2 id="8-根据邮箱自定义评论头像"><a href="#8-根据邮箱自定义评论头像" class="headerlink" title="8. 根据邮箱自定义评论头像"></a><span class="section-number">8.</span> <span class="s-fc-hd">根据邮箱自定义评论头像</span></h2><div class="note info"><span class="f-fw">
来自　<a class="s-fc-a" href="https://meow3.family.blog/">恶魔菌の记事簿</a>　小姐姐的建议
</span></div>
<p><span class="f-fw">打开　</span><a href="https://cn.gravatar.com/"><span class="f-fw">Gravatar</span></a></p>
<p><span class="f-fw">注册并上传图片</span></p>
<p><span class="f-fw">之后即可在支持填写邮箱的评论插件中使用自己的头像啦</span></p>
<p><span class="f-fw">如果头像没有生效的话清除下网站缓存就行啦</span></p>
<br/>

<h2 id="9-修改分类层级显示"><a href="#9-修改分类层级显示" class="headerlink" title="9. 修改分类层级显示"></a><span class="section-number">9.</span> <span class="s-fc-hd">修改分类层级显示</span></h2><h3 id="9-1-修改-post-njk"><a href="#9-1-修改-post-njk" class="headerlink" title="9.1. 修改 post.njk"></a>9.1. 修改 post.njk</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://yuchen-lea.github.io/2016-01-23-display-hexo-category-in-hierarchy/">跬步</a>
</span></div>

<p><img data-src="/images/posts/hexo-optimization/hexo-optimization1.webp"></p>
<p><span class="f-fw">打开</span>　<code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(<span class="string">&#x27;symbol.comma&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(<span class="string">&#x27;&gt;&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>
<br/>

<h3 id="9-2-修改-custom-styl"><a href="#9-2-修改-custom-styl" class="headerlink" title="9.2. 修改 custom.styl"></a>9.2. 修改 custom.styl</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://www.zhihu.com/question/57888214/answer/154699381">孔晨皓</a>
</span></div>


<p><img data-src="/images/posts/hexo-optimization/hexo-optimization2.webp"></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.category-list</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="selector-tag">li</span>:before &#123;</span><br><span class="line">    content: <span class="string">&#x27;&gt;&gt;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="10-添加标题底部横线"><a href="#10-添加标题底部横线" class="headerlink" title="10. 添加标题底部横线"></a><span class="section-number">10.</span> <span class="s-fc-hd">添加标题底部横线</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://yuchen-lea.github.io/">跬步</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#8c8c8c</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5%</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="11-修改页脚文字"><a href="#11-修改页脚文字" class="headerlink" title="11. 修改页脚文字"></a><span class="section-number">11.</span> <span class="s-fc-hd">修改页脚文字</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://rockzhou.tk/2016/03/22/%E7%BB%99-HEXO-%E5%8D%9A%E5%AE%A2%E8%87%AA%E5%AE%9A%E4%B9%89%E8%83%8C%E6%99%AF%E5%9B%BE/">RockZhou's Blog</a>
</span></div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 底部字体</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: $fontColor;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.busuanzi-value</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="12-设置背景图片"><a href="#12-设置背景图片" class="headerlink" title="12. 设置背景图片"></a><span class="section-number">12.</span> <span class="s-fc-hd">设置背景图片</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://rockzhou.tk/2016/03/22/%E7%BB%99-HEXO-%E5%8D%9A%E5%AE%A2%E8%87%AA%E5%AE%9A%E4%B9%89%E8%83%8C%E6%99%AF%E5%9B%BE/">RockZhou's Blog</a>
</span></div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 背景图片</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">/images/background.jpg</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="13-去除-more-标签"><a href="#13-去除-more-标签" class="headerlink" title="13. 去除 #more 标签"></a><span class="section-number">13.</span> <span class="s-fc-hd">去除 #more 标签</span></h2><div class="note info"><span class="f-fw">
本节指导自　<a class="s-fc-a" href="http://shenzekun.cn/">Moorez</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">搜索　</span><code>#more</code></p>
<p><span class="f-fw">删除即可</span></p>
<br/>

<h2 id="14-记忆浏览位置"><a href="#14-记忆浏览位置" class="headerlink" title="14. 记忆浏览位置"></a><span class="section-number">14.</span> <span class="s-fc-hd">记忆浏览位置</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://stackoverflow.com/questions/38750414/store-and-recover-scroll-position-using-cookies-in-javascript">Stack Overflow</a>
</span></div>

<p><strong>关闭本页，重新打开，将返回刚才的浏览进度。</strong></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记忆浏览位置</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">localStorage</span>.tempScrollTop) &#123;</span><br><span class="line">    $(<span class="built_in">window</span>).scrollTop(<span class="built_in">localStorage</span>.tempScrollTop);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="built_in">window</span>).on(<span class="string">&quot;scroll&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;tempScrollTop&quot;</span>, $(<span class="built_in">window</span>).scrollTop());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tempScrollTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;tempScrollTop&quot;</span>, tempScrollTop);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="15-修改页宽"><a href="#15-修改页宽" class="headerlink" title="15. 修改页宽"></a><span class="section-number">15.</span> <span class="s-fc-hd">修改页宽</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://hexo-guide.readthedocs.io/zh_CN/latest/theme/[NexT]%E8%B0%83%E6%95%B4%E9%A1%B5%E9%9D%A2%E5%AE%BD%E5%BA%A6.html">[NexT]调整页面宽度</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\variables.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$<span class="attribute">content</span>-desktop                = <span class="number">850px</span></span><br><span class="line">$<span class="attribute">content</span>-desktop-large          = <span class="number">950px</span></span><br><span class="line">$<span class="attribute">content</span>-desktop-largest        = <span class="number">1100px</span></span><br></pre></td></tr></table></figure>

<p><strong>数值改为百分比会导致在屏宽较小的显示器上，侧边栏打开时内容缩放，使得目录与文字不匹配。</strong></p>
<br/>

<h2 id="16-分类和标签界面显示年份"><a href="#16-分类和标签界面显示年份" class="headerlink" title="16. 分类和标签界面显示年份"></a><span class="section-number">16.</span> <span class="s-fc-hd">分类和标签界面显示年份</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html">reuixiv</a>
</span></div>

<p><strong>Next 主题已自带该功能</strong></p>
<h3 id="16-1-修改-category-njk"><a href="#16-1-修改-category-njk" class="headerlink" title="16.1. 修改 category.njk"></a>16.1. 修改 category.njk</h3><p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\category.njk</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;# Show year #&#125;</span><br><span class="line">  &#123;% set year %&#125;</span><br><span class="line">  &#123;% set post.year = date(post.date, &#x27;YYYY&#x27;) %&#125;</span><br><span class="line">  &#123;% if post.year !== year %&#125;</span><br><span class="line">  &#123;% set year = post.year %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collection-title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;archive-year motion-element&quot;</span> <span class="attr">id</span>=<span class="string">&quot;archive-year-&#123;&#123; year &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; year &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &#123;# endshow #&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block script_extra %&#125;</span><br><span class="line">  &#123;% if theme.use_motion %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;motion.page.archive&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;.archive-year&#x27;</span>).velocity(<span class="string">&#x27;transition.slideLeftIn&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-修改-tag-njk"><a href="#16-2-修改-tag-njk" class="headerlink" title="16.2. 修改 tag.njk"></a>16.2. 修改 tag.njk</h3><p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\tag.njk</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> post <span class="keyword">in</span> page.posts %&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;# Show year #&#125;</span><br><span class="line">  &#123;% set year %&#125;</span><br><span class="line">  &#123;% set post.year = date(post.date, &#x27;YYYY&#x27;) %&#125;</span><br><span class="line">  &#123;% if post.year !== year %&#125;</span><br><span class="line">  &#123;% set year = post.year %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collection-title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;archive-year motion-element&quot;</span> <span class="attr">id</span>=<span class="string">&quot;archive-year-&#123;&#123; year &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; year &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &#123;# endshow #&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block script_extra %&#125;</span><br><span class="line">  &#123;% if theme.use_motion %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;motion.page.archive&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;.archive-year&#x27;</span>).velocity(<span class="string">&#x27;transition.slideLeftIn&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="17-滚动条美化"><a href="#17-滚动条美化" class="headerlink" title="17. 滚动条美化"></a><span class="section-number">17.</span> <span class="s-fc-hd">滚动条美化</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://isudox.com/2016/07/14/customize-hexo-theme/">I sudo X</a>
</span></div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button &#123;</span><br><span class="line">  width: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:start:increment,::-webkit-scrollbar-button:end:decrement &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  border-radius: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">  border-radius: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-track,::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  border-right: <span class="number">1px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-track:hover &#123;</span><br><span class="line">  background-color: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:start &#123;</span><br><span class="line">  width: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:start:hover &#123;</span><br><span class="line">  background: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat -<span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:start:active &#123;</span><br><span class="line">  background: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat -<span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:end &#123;</span><br><span class="line">  width: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat <span class="number">0</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:end:hover &#123;</span><br><span class="line">  background: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat -<span class="number">15px</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-button:end:active &#123;</span><br><span class="line">  background: <span class="built_in">url</span>(<span class="string">../images/scrollbar_arrow.png</span>) no-repeat -<span class="number">30px</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">下载　</span><a id="download" href="http://qianling.image.alimmdn.com/scrollbar-arrow.png?t=1501300575329"><i class="fa fa-download"></i><span>scrollbar_arrow.png</span></a></p>
<br/>

<h2 id="18-畅言加载优化"><a href="#18-畅言加载优化" class="headerlink" title="18. 畅言加载优化"></a><span class="section-number">18.</span> <span class="s-fc-hd">畅言加载优化</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">刘兴刚博客</a>
</span></div>
<p>将畅言依赖的<code>embed.js</code>放至底部</p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_third-party\comments\changyan.njk</code></p>
<p><span class="f-fw">查找　</span><code>document.getElementsByTagName(&quot;head&quot;)[0]</code></p>
<p><span class="f-fw">改为　</span><code>document.getElementsByTagName(&quot;footer&quot;)[0]</code></p>
<br/>

<h2 id="19-畅言去版权"><a href="#19-畅言去版权" class="headerlink" title="19. 畅言去版权"></a><span class="section-number">19.</span> <span class="s-fc-hd">畅言去版权</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://www.hao7di.com/haowen/wangluojiqiao/312.html">好基地</a>
</span></div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-notice</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.section-service-w</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-box</span> <span class="selector-class">.post-wrap-w</span> <span class="selector-class">.post-wrap-main</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">https://i.loli.net/2017/08/05/5985668d58744.png</span>) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span>&#123;<span class="attribute">position</span>:relative;<span class="attribute">z-index</span>:<span class="number">0</span> <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.split-hr</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.phone-login</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span><span class="selector-class">.changyan-login-dialog-wrapper-main</span>&#123;<span class="attribute">height</span>:<span class="number">250px</span> <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-group</span> <span class="selector-class">.login-item</span> <span class="selector-class">.login-logo-phone</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-instruction</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-group</span> <span class="selector-class">.login-item</span> <span class="selector-class">.login-logo-wechat</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span><span class="selector-class">.changyan-login-dialog-wrapper-main</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">https://i.loli.net/2017/08/05/59856762568bb.png</span>) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.cy-logo</span>&#123;<span class="attribute">background</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-box</span> <span class="selector-class">.post-wrap-w</span> <span class="selector-class">.wrap-action-w</span> <span class="selector-class">.action-issue-w</span> <span class="selector-class">.issue-btn-w</span> <span class="selector-tag">a</span> <span class="selector-class">.btn-fw</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">https://i.loli.net/2017/08/05/5985612ad66f5.png</span>) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span>, <span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span> <span class="selector-class">.service-wrap-w</span>, <span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span> <span class="selector-class">.service-wrap-w</span> <span class="selector-tag">a</span>&#123;<span class="attribute">height</span>:<span class="number">0px</span> <span class="meta">!important</span>;<span class="attribute">overflow</span>:hidden <span class="meta">!important</span>;&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="20-代码块复制功能"><a href="#20-代码块复制功能" class="headerlink" title="20. 代码块复制功能"></a><span class="section-number">20.</span> <span class="s-fc-hd">代码块复制功能</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://zhuzhuyule.com/blog/HEXO/HEXO%E4%BC%98%E5%8C%96%E4%B9%8B%EF%BC%88%E4%BA%8C%EF%BC%89-%E6%B7%BB%E5%8A%A0%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD.html/">猪猪娱乐</a>
</span></div>

<p><strong>更新 Next 主题至 5.1.3 后失效，现已自带复制功能</strong></p>
<h3 id="20-1-下载-clipboard-js"><a href="#20-1-下载-clipboard-js" class="headerlink" title="20.1. 下载 clipboard.js"></a>20.1. 下载 <a href="https://github.com/zenorocha/clipboard.js/"><code>clipboard.js</code></a></h3><p><span class="f-fw">任选其一　</span></p>
<p><i class="fa fa-download"></i> <a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.js"><code>clipboard.js</code></a></p>
<p><i class="fa fa-download"></i> <a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"><code>clipboard.min.js</code></a>（<i class="fa fa-fire"></i> 推荐）</p>
<p><span class="f-fw">打开</span>　<code>\hexo-theme-next\source\lib\</code></p>
<p><span class="f-fw">新建文件夹</span>　<code>zclip</code></p>
<p><span class="f-fw">放置</span>　<code>clipboard.js／clipboard.min.js</code></p>
<br/>

<h3 id="20-2-插入-JavaScript"><a href="#20-2-插入-JavaScript" class="headerlink" title="20.2. 插入 JavaScript"></a>20.2. 插入 JavaScript</h3><p><span class="f-fw">打开</span>　<code>\hexo-theme-next\source\js\</code></p>
<p><span class="f-fw">新建</span>　<code>custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此函数用于创建复制按钮</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCopyBtns</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $codeArea = $(<span class="string">&quot;figure table&quot;</span>);</span><br><span class="line">  <span class="comment">//查看页面是否具有代码区域，没有代码块则不创建 复制按钮</span></span><br><span class="line">  <span class="keyword">if</span> ($codeArea.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">//复制成功后将要干的事情</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeToSuccess</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">       $imgOK = $(<span class="string">&quot;#copyBtn&quot;</span>).find(<span class="string">&quot;#imgSuccess&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> ($imgOK.css(<span class="string">&quot;display&quot;</span>) == <span class="string">&quot;none&quot;</span>) &#123;</span><br><span class="line">          $imgOK.css(&#123;</span><br><span class="line">            <span class="attr">opacity</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">display</span>: <span class="string">&quot;block&quot;</span></span><br><span class="line">          &#125;);</span><br><span class="line">          $imgOK.animate(&#123;</span><br><span class="line">            <span class="attr">opacity</span>: <span class="number">1</span></span><br><span class="line">          &#125;, <span class="number">1000</span>);</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $imgOK.animate(&#123;</span><br><span class="line">              <span class="attr">opacity</span>: <span class="number">0</span></span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">          &#125;, <span class="number">2000</span>);</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $imgOK.css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;none&quot;</span>);</span><br><span class="line">          &#125;, <span class="number">4000</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//创建 全局复制按钮，仅有一组。包含：复制按钮，复制成功响应按钮</span></span><br><span class="line">    <span class="comment">//值得注意的是：1.按钮默认隐藏，2.位置使用绝对位置 position: absolute; (position: fixed 也可以，需要修改代码)</span></span><br><span class="line">    $(<span class="string">&quot;.post-body&quot;</span>).before(<span class="string">&#x27;&lt;div id=&quot;copyBtn&quot; style=&quot;opacity: 0; position: absolute;top:0px;display: none;line-height: 1; font-size:1.5em&quot;&gt;&lt;span id=&quot;imgCopy&quot; &gt;&lt;i class=&quot;fa fa-paste fa-fw&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;span id=&quot;imgSuccess&quot; style=&quot;display: none;&quot;&gt;&lt;i class=&quot;fa fa-check-circle fa-fw&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;</span>);</span><br><span class="line">    <span class="comment">//创建 复制 插件，绑定单机时间到 指定元素，支持JQuery</span></span><br><span class="line">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">&#x27;#copyBtn&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//返回需要复制的元素内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">&quot;[copyFlag]&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">isSupported</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//支持复制内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">&quot;[copyFlag]&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//复制成功事件绑定</span></span><br><span class="line">    clipboard.on(<span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//清除内容被选择状态</span></span><br><span class="line">        e.clearSelection();</span><br><span class="line">        changeToSuccess(e);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="comment">//复制失败绑定事件</span></span><br><span class="line">    clipboard.on(<span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">&#x27;Action:&#x27;</span>, e.action);</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">&#x27;Trigger:&#x27;</span>, e.trigger);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="comment">//鼠标 在复制按钮上滑动和离开后渐变显示/隐藏效果</span></span><br><span class="line">    $(<span class="string">&quot;#copyBtn&quot;</span>).hover(</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">this</span>).stop();</span><br><span class="line">        $(<span class="built_in">this</span>).css(<span class="string">&quot;opacity&quot;</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">this</span>).animate(&#123;</span><br><span class="line">          <span class="attr">opacity</span>: <span class="number">0</span></span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//感应鼠标是否在代码区</span></span><br><span class="line">$(<span class="string">&quot;figure&quot;</span>).hover(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//-------鼠标活动在代码块内</span></span><br><span class="line">    <span class="comment">//移除之前含有复制标志代码块的 copyFlag</span></span><br><span class="line">    $(<span class="string">&quot;[copyFlag]&quot;</span>).removeAttr(<span class="string">&quot;copyFlag&quot;</span>);</span><br><span class="line">    <span class="comment">//在新的（当前鼠标所在代码区）代码块插入标志：copyFlag</span></span><br><span class="line">    $(<span class="built_in">this</span>).find(<span class="string">&quot;.code&quot;</span>).attr(<span class="string">&quot;copyFlag&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//获取复制按钮</span></span><br><span class="line">    $copyBtn = $(<span class="string">&quot;#copyBtn&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> ($copyBtn.lenght != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//获取到按钮的前提下进行一下操作</span></span><br><span class="line">      <span class="comment">//停止按钮动画效果</span></span><br><span class="line">      <span class="comment">//设置为 显示状态</span></span><br><span class="line">      <span class="comment">//修改 复制按钮 位置到 当前代码块开始部位</span></span><br><span class="line">      <span class="comment">//设置代码块 左侧位置</span></span><br><span class="line">      $copyBtn.stop();</span><br><span class="line">      $copyBtn.css(<span class="string">&quot;opacity&quot;</span>, <span class="number">0.8</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;block&quot;</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">&quot;top&quot;</span>, <span class="built_in">parseInt</span>($copyBtn.css(<span class="string">&quot;top&quot;</span>)) + $(<span class="built_in">this</span>).offset().top - $copyBtn.offset().top + <span class="number">3</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">&quot;left&quot;</span>, -$copyBtn.width() - <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//-------鼠标离开代码块</span></span><br><span class="line">    <span class="comment">//设置复制按钮可见度 2秒内到 0</span></span><br><span class="line">    $(<span class="string">&quot;#copyBtn&quot;</span>).animate(&#123;</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">0</span></span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">//页面载入完成后，创建复制按钮</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  createCopyBtns();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="20-3-引入自定义文件"><a href="#20-3-引入自定义文件" class="headerlink" title="20.3. 引入自定义文件"></a>20.3. 引入自定义文件</span></h3><p><span class="f-fw">打开</span>　<code>\hexo-theme-next\layout\_custom\</code></p>
<p><span class="f-fw">新建</span>　<code>custom.njk</code></p>
<p><span class="f-fw">打开</span>　<code>\hexo-theme-next\layout\_layout.njk</code></p>
<p><span class="f-fw">在</span> <code>&lt;/body&gt;</code> <span class="f-fw">前添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">&#x27;_custom/custom.njk&#x27;</span> %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="20-4-添加主题"><a href="#20-4-添加主题" class="headerlink" title="20.4. 添加主题"></a>20.4. 添加主题</h3><p><span class="f-fw">打开</span>　<code>\blog\source\_data\header.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;/lib/zclip/clipboard.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/custom.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="21-文末结束标记"><a href="#21-文末结束标记" class="headerlink" title="21. 文末结束标记"></a><span class="section-number">21.</span> <span class="s-fc-hd">文末结束标记</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://www.wuxubj.cn/2016/08/Hexo-nexT-build-personal-blog/#5-3-文章末尾添加“本文结束”标记/">务虚笔记</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\</code></p>
<p><span class="f-fw">新建　</span><code>passage-end-tag.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.passage_end_tag.enabled %&#125;</span><br><span class="line">&lt;div style=<span class="string">&quot;text-align:center;color: #ccc;font-size:15px;&quot;</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line">-------------文章结束啦 ~\(≧▽≦)/~ 感谢您的阅读-------------&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">查找　</span><code>wechat</code></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization3.webp"></p>
<p><span class="f-fw">于图中位置添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div&gt;</span><br><span class="line">  &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">  &#123;% include <span class="string">&#x27;passage-end-tag.njk&#x27;</span> %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加“本文结束”标记</span></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="22-鼠标点击特效"><a href="#22-鼠标点击特效" class="headerlink" title="22. 鼠标点击特效"></a><span id="#21"><span class="section-number">22.</span> <span class="s-fc-hd">鼠标点击特效</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 点击特效 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;fireworks&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/fireworks.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">下载　</span><br><i class="fa fa-download"></i> <a href="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"><code>anime.min.js</code></a><br><i class="fa fa-download"></i> <a href="https://qianling.pw/js/custom/fireworks.js"><code>fireworks.js</code></a></p>
<p><span class="f-fw">放置</span>　<code>anime.min.js</code> <span class="f-fw">至 CDN</span></p>
<p><span class="f-fw">打开</span>　<code>\hexo-theme-next\source\js\custom\</code></p>
<p><span class="f-fw">放置</span>　<code>fireworks.js</code></p>
<br/>

<h2 id="23-侧边栏添加-APlayer"><a href="#23-侧边栏添加-APlayer" class="headerlink" title="23. 侧边栏添加 APlayer"></a><span class="section-number">23.</span> <span class="s-fc-hd">侧边栏添加 APlayer</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a>
</span></div>

<p><img data-src="/images/posts/hexo-optimization/hexo-optimization4.webp"></p>
<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="https://qianling.pw/js/custom/APlayer.min.js/"><code>APlayer.min.js</code></a></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\custom\</code></p>
<p><span class="f-fw">放置　</span><code>APlayer.min.js</code></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\sidebar.njk</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;aplayer&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;aplayer&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/custom/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">var</span> ap = <span class="keyword">new</span> APlayer(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">element</span>: <span class="built_in">document</span>.getElementById(<span class="string">&#x27;aplayer&#x27;</span>),         <span class="comment">// Optional, player element</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">narrow</span>: <span class="literal">false</span>,         <span class="comment">// Optional, narrow style</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">autoplay</span>: <span class="literal">false</span>,              <span class="comment">// Optional, autoplay song(s), not supported by mobile browsers</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">showlrc</span>: <span class="number">0</span>,     <span class="comment">// Optional, show lrc, can be 0, 1, 2, see: ###With lrc</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">mutex</span>: <span class="literal">true</span>,                 <span class="comment">// Optional, pause other players when this player playing</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">theme</span>: <span class="string">&#x27;#e6d0b2&#x27;</span>,          <span class="comment">// Optional, theme color, default: #b7daff</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">mode</span>: <span class="string">&#x27;random&#x27;</span>,      <span class="comment">// Optional, play mode, can be `random` `single` `circulation`(loop) `order`(no loop), default: `circulation`</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">preload</span>: <span class="string">&#x27;metadata&#x27;</span>,               <span class="comment">// Optional, the way to load music, can be &#x27;none&#x27; &#x27;metadata&#x27; &#x27;auto&#x27;, default: &#x27;auto&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">listmaxheight</span>: <span class="string">&#x27;513px&#x27;</span>,      <span class="comment">// Optional, max height of play list</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">music</span>: [&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">title</span>: <span class="string">&#x27;双笙 囧菌 - 世末歌者&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">author</span>: <span class="string">&#x27;双笙 囧菌&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">url</span>: <span class="string">&#x27;https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.mp3&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">pic</span>: <span class="string">&#x27;https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.webp&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;, &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">title</span>: <span class="string">&#x27;幹物女(WeiWei)&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">author</span>: <span class="string">&#x27;封茗囧菌&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">url</span>: <span class="string">&#x27;https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).mp3&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">pic</span>: <span class="string">&#x27;https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).webp&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="24-页面添加-live2d"><a href="#24-页面添加-live2d" class="headerlink" title="24. 页面添加 live2d"></a><span class="section-number">24.</span> <span class="s-fc-hd">页面添加 live2d</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://huaji8.top/post/live2d-plugin-2.0">幻想帖</a>
</span></div>

<p><span class="f-fw">安装　</span><code>npm install -save hexo-helper-live2d</code></p>
<p><span class="f-fw">打开</span>　<code>\blog\source\_data\header.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; live2d() &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">koharu</span></span><br><span class="line">  <span class="attr">width:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">height:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">scaling:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">mobileShow:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobileScaling:</span> <span class="number">0.5</span></span><br><span class="line">  <span class="attr">opacityDefault:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">horizontalOffset:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">verticalOffset:</span> <span class="number">-40</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">live2d</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">live2dcanvas</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="25-添加-Mob-分享"><a href="#25-添加-Mob-分享" class="headerlink" title="25. 添加 Mob 分享"></a><span class="section-number">25.</span> <span class="s-fc-hd">添加 Mob 分享</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://github.com/iissnan/hexo-theme-next/issues/911/">Issue #911</a>
</span></div>
<p><span class="f-fw">登录 MOB（如无帐号请注册）　</span><a href="http://mob.com/login/">http://mob.com/login/</a></p>
<p><span class="f-fw">添加新的应用，然后在添加产品处添加 ShareSDK　</span></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization5.webp"></p>
<p><span class="f-fw">打开设置，复制AppKey</span></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Share</span></span><br><span class="line"><span class="attr">mob_share:</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">******</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_partials\share\</code></p>
<p><span class="f-fw">新建　</span><code>mob_share.njk</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MOB SHARE BEGIN--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-ui-button -mob-share-open&quot;</span>&gt;</span>分 享<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-ui&quot;</span>  <span class="attr">-mob-share-ui-theme</span> <span class="attr">-mob-share-ui-theme-slide-bottom</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-weixin&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>微信<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-qzone&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>QQ空间<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-weibo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>新浪微博<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-facebook&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Facebook<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-twitter&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Twitter<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-pocket&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Pocket<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-tumblr&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Tumblr<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-google&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Google+<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-linkedin&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Linkedin<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-qq&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>QQ好友<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-tencentweibo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>腾讯微博<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-renren&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>人人网<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-douban&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>豆瓣<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-youdao&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>有道云笔记<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-instapaper&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Instapaper<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-close&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;-mob-share-ui-bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;-mob-share&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://f1.webshare.mob.com/code/mob-share.js?appkey=&#123;&#123;config.mob_share.appkey&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MOB SHARE END--&gt;</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">查找　</span><code>&lt;i class=&quot;fa fa-chevron-right&quot;&gt;</code></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization6.webp"></p>
<p><span class="f-fw">于图中位置添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">&#x27;../_partials/share/mob_share.njk&#x27;</span> %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="26-文章置顶"><a href="#26-文章置顶" class="headerlink" title="26. 文章置顶"></a><span class="section-number">26.</span> <span class="s-fc-hd">文章置顶</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html#26-博文置顶/">Moorez</a>
</span></div>

<p><strong>Next 主题已自带该功能</strong></p>
<p><strong>Bug：与按文章更新时间排序冲突</strong></p>
<h3 id="26-1-修改-generator-js"><a href="#26-1-修改-generator-js" class="headerlink" title="26.1. 修改 generator.js"></a>26.1. 修改 generator.js</h3><p><span class="f-fw">打开　</span><code>\blog\node_modules\hexo-generator-index\lib\generator.js</code></p>
<p><span class="f-fw">将内容修改为　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> pagination = <span class="built_in">require</span>(<span class="string">&#x27;hexo-pagination&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = <span class="built_in">this</span>.config;</span><br><span class="line">  <span class="keyword">var</span> posts = locals.posts;</span><br><span class="line">  posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.sticky &amp;&amp; b.sticky) &#123; <span class="comment">// 两篇文章sticky都有定义</span></span><br><span class="line">      <span class="keyword">if</span>(a.sticky == b.sticky) <span class="keyword">return</span> b.date - a.date; <span class="comment">// 若sticky值一样则按照文章日期降序排</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">return</span> b.sticky - a.sticky; <span class="comment">// 否则按照sticky值降序排</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.sticky &amp;&amp; !b.sticky) &#123; <span class="comment">// 以下是只有一篇文章sticky有定义，那么将有sticky的排在前面（这里用异或操作居然不行233）</span></span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(!a.sticky &amp;&amp; b.sticky) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// 都没定义按照文章日期降序排</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">var</span> paginationDir = config.pagination_dir || <span class="string">&#x27;page&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> pagination(<span class="string">&#x27;&#x27;</span>, posts, &#123;</span><br><span class="line">  <span class="attr">perPage</span>: config.index_generator.per_page,</span><br><span class="line">  <span class="attr">layout</span>: [<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;archive&#x27;</span>],</span><br><span class="line">  <span class="attr">format</span>: paginationDir + <span class="string">&#x27;/%d/&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">__index</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">使用方法</span></p>
<p>在文章中添加 sticky 值，数值越大文章越靠前，如</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexo 优化汇总</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">  -</span> Hexo</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  -</span> 前端</span><br><span class="line"><span class="section">  - Hexo</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<br/>

<h3 id="26-2-图标美化"><a href="#26-2-图标美化" class="headerlink" title="26.2. 图标美化"></a>26.2. 图标美化</h3><p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">查找（两条）　</span><code>&lt;i class=&quot;fa fa-thumbtack&quot;&gt;&lt;/i&gt;</code></p>
<p><span class="f-fw">修改为想要的图形（以图片为例）　</span><code>&lt;img src=&quot;/images/sticky.png&quot; width=&quot;60&quot; height=&quot;60&quot; /&gt;</code></p>
<p><span class="f-fw">如果是图片，可能需要修改 CSS，以下为参考</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 文章置顶标签样式</span><br><span class="line"><span class="selector-class">.post-sticky-flag</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">+mobile() &#123;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">25px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-sticky-flag</span> &#123;</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="27-Local-Search-加载动画修改"><a href="#27-Local-Search-加载动画修改" class="headerlink" title="27. Local Search 加载动画修改"></a><span class="section-number">27.</span> <span class="s-fc-hd">Local Search 加载动画修改</span></h2><p><strong>Next 主题已自带预加载功能</strong></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\local-search.js</code></p>
<p><span class="f-fw">查找　</span><code>fa fa-spinner fa-pulse fa-5x fa-fw</code></p>
<p><span class="f-fw">改为　</span><code>fa fa-circle-o-notch fa-spin fa-5x fa-fw margin-bottom</code></p>
<br/>

<h2 id="28-Star-rating-修改"><a href="#28-Star-rating-修改" class="headerlink" title="28. Star rating 修改"></a><span class="section-number">28.</span> <span class="s-fc-hd">Star rating 修改</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html#文章底部加上评分小星星/">reuixiy</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_partials\post\post-footer.njk</code></p>
<p><span class="f-fw">查找　</span><code>&lt;div class=&quot;wp_rating&quot;&gt;</code></p>
<p><span class="f-fw">在下一行添加</span><br><code>&lt;div style=&quot;color: rgba(0, 0, 0, 0.75); font-size:13px; letter-spacing:3px&quot;&gt;(&amp;gt;来评分吧&amp;lt;)&lt;/div&gt;</code></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 评分留白更改</span><br><span class="line"><span class="selector-class">.post-widgets</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-nav</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="29-点击侧栏以外区域时关闭侧栏"><a href="#29-点击侧栏以外区域时关闭侧栏" class="headerlink" title="29. 点击侧栏以外区域时关闭侧栏"></a><span class="section-number">29.</span> <span class="s-fc-hd">点击侧栏以外区域时关闭侧栏</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://github.com/iissnan/hexo-theme-next/issues/947">Issue #947</a>
</span></div>

<p><strong>Next 主题 7.0+ 已失效</strong></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\motion.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击侧栏以外区域时关闭侧栏</span></span><br><span class="line">$(<span class="string">&#x27;body&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> bSidebarShow = $(<span class="string">&#x27;#sidebar&#x27;</span>).css(<span class="string">&#x27;display&#x27;</span>)===<span class="string">&#x27;block&#x27;</span> &amp;&amp; $(<span class="string">&#x27;#sidebar&#x27;</span>).width() &gt; <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> bFlag = $(e.target).parents(<span class="string">&#x27;#sidebar,.sidebar-toggle&#x27;</span>).length &gt; <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(bSidebarShow &amp;&amp; !bFlag)&#123;</span><br><span class="line">    $(<span class="string">&#x27;.sidebar-toggle-line-wrap&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">    e.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="30-阅读进度条"><a href="#30-阅读进度条" class="headerlink" title="30. 阅读进度条"></a><span class="section-number">30.</span> <span class="s-fc-hd">阅读进度条</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://isudox.com/2016/07/14/customize-hexo-theme/">I sudo X</a>
</span></div>

<p><strong>比自带的更好看。</strong></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top-scroll-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//顶部阅读进度条</span><br><span class="line"><span class="selector-class">.top-scroll-bar</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.7s</span>,<span class="number">0.7s</span>;</span><br><span class="line">  transiton-property: width,background;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99999</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#37C6C0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//阅读进度条</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).attr(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;width: &quot;</span> + ($(<span class="built_in">this</span>).scrollTop() / ($(<span class="built_in">document</span>).height() - $(<span class="built_in">this</span>).height()) * <span class="number">100</span>) + <span class="string">&quot;%; display: block;&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> s=$(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  <span class="keyword">var</span> a=$(<span class="built_in">document</span>).height();</span><br><span class="line">  <span class="keyword">var</span> b=$(<span class="built_in">window</span>).height();</span><br><span class="line">  <span class="keyword">var</span> result=<span class="built_in">parseInt</span>(s/(a-b)*<span class="number">100</span>);</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;width&quot;</span>,result+<span class="string">&quot;%&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">0</span>&amp;&amp;result&lt;=<span class="number">19</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#cccccc&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">20</span>&amp;&amp;result&lt;=<span class="number">39</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#50bcb6&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">40</span>&amp;&amp;result&lt;=<span class="number">59</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#85c440&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">60</span>&amp;&amp;result&lt;=<span class="number">79</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#f2b63c&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">80</span>&amp;&amp;result&lt;=<span class="number">99</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#FF0000&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(result==<span class="number">100</span>)</span><br><span class="line">  $(<span class="string">&quot;.top-scroll-bar&quot;</span>).css(<span class="string">&quot;background&quot;</span>,<span class="string">&quot;#f58ca1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="31-评论输入打字礼花及震动特效"><a href="#31-评论输入打字礼花及震动特效" class="headerlink" title="31. 评论输入打字礼花及震动特效"></a><span class="section-number">31.</span> <span class="s-fc-hd">评论输入打字礼花及震动特效</span></h2><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://www.ilxtx.com/comment-input-effects.html/">龙笑天下</a>
</span></div>

<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/js/activate-power-mode.js"><code>activate-power-mode.js</code></a></p>
<p><span class="f-fw">放置</span>　<code>activate-power-mode.js</code> <span class="f-fw">至 CDN</span></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.njk</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 打字礼花及震动特效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/js/activate-power-mode.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  POWERMODE.colorful = <span class="literal">true</span>; <span class="comment">// ture 为启用礼花特效</span></span></span><br><span class="line"><span class="javascript">  POWERMODE.shake = <span class="literal">false</span>; <span class="comment">// false 为禁用震动特效</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;input&#x27;</span>, POWERMODE);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="32-Valine-邮件提醒"><a href="#32-Valine-邮件提醒" class="headerlink" title="32. Valine 邮件提醒"></a><span class="section-number">32.</span> <span class="s-fc-hd">Valine 邮件提醒</span></h2><div class="note info"><span class="f-fw">
教程　<a class="s-fc-a" href="http://www.zhaojun.im/hexo-valine-admin/">Hexo 优化 --- Valine 扩展之邮件通知</a>
</span></div>

<p><strong>已失效</strong></p>
<div class="f-fw">
使用 LeanCloud 存储你的评论数据，在 LeanEngine 云引擎上管理你的评论，包括邮件通知和垃圾评论标记。

<p>这是用于 Valine 评论 的后台管理，可以部署到你的 LeanCloud。它可以帮你完成：</p>
</div>

<ul>
<li><span class="f-fw">完善的邮件通知</span><ul>
<li><span class="f-fw">收到评论后, 通知站长</span></li>
<li><span class="f-fw">游客被 @ 通知</span></li>
</ul>
</li>
<li><span class="f-fw">邮件模板定制</span></li>
<li><span class="f-fw">评论管理</span></li>
</ul>
<p>注意：修改 <strong>QQ 密码</strong>后，<strong>SMTP 密码</strong>会变动，需要重新获取授权码并修改 <strong>SMTP_PASS</strong> 参数后才能继续使用邮件提醒功能。</p>
<p>重启容器不影响定时器。</p>
<br/>

<h2 id="33-Valine-匿名修改"><a href="#33-Valine-匿名修改" class="headerlink" title="33. Valine 匿名修改"></a><span class="section-number">33.</span> <span class="s-fc-hd">Valine 匿名修改</span></h2><p>Valine 不填写昵称默认显示为 Anonymous，将其修改为中文匿名。</p>
<p><span class="f-fw">下载并打开　</span><code>Valine.min.js</code></p>
<p><span class="f-fw">查找　</span><code>Anonymous</code></p>
<p><span class="f-fw">将两处</span> <code>Anonymous</code> <span class="f-fw">改为</span> <code>匿名</code></p>
<br/>

<h2 id="34-折叠功能"><a href="#34-折叠功能" class="headerlink" title="34. 折叠功能"></a><span class="section-number">34.</span> <span class="s-fc-hd">折叠功能</span></h2><div class="note info"><span class="f-fw">
本节转载自　<a class="s-fc-a" href="https://blog.rmiao.top/hexo-fold-block/">Hexo next博客添加折叠块功能添加折叠代码块</a>
</span></div>

<p>有大段的东西想要放上去，但又不想占据大量的位置。折叠是最好的选择。</p>
<div><div class="fold_hider"><div class="close hider_title">示范&nbsp·&nbsp点击以显示／隐藏内容</div></div><div class="fold">
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% fold 这里是按钮文本 %&#125;</span><br><span class="line">这里是折叠内容，类型不限。</span><br><span class="line">&#123;% endfold %&#125;</span><br></pre></td></tr></table></figure>
</div></div>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 折叠</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.fold_hider&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">&#x27;&gt;.fold&#x27;</span>, <span class="built_in">this</span>.parentNode).slideToggle();</span><br><span class="line">    $(<span class="string">&#x27;&gt;:first&#x27;</span>, <span class="built_in">this</span>).toggleClass(<span class="string">&#x27;open&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//默认情况下折叠</span></span><br><span class="line">  $(<span class="string">&quot;div.fold&quot;</span>).css(<span class="string">&quot;display&quot;</span>,<span class="string">&quot;none&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\scripts</code></p>
<p><span class="f-fw">新建　</span><code>tags.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rEscapeContent = <span class="regexp">/&lt;escape(?:[^&gt;]*)&gt;([\s\S]*?)&lt;\/escape&gt;/g</span>;</span><br><span class="line"><span class="keyword">const</span> placeholder = <span class="string">&#x27;\uFFFD&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> rPlaceholder = <span class="regexp">/(?:&lt;|&amp;lt;)\!--\uFFFD(\d+)--(?:&gt;|&amp;gt;)/g</span>;</span><br><span class="line"><span class="keyword">const</span> cache = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeContent</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;!--&#x27;</span> + placeholder + (cache.push(str) - <span class="number">1</span>) + <span class="string">&#x27;--&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;before_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rEscapeContent, <span class="function"><span class="keyword">function</span>(<span class="params">match, content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> escapeContent(content);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rPlaceholder, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> cache[<span class="built_in">arguments</span>[<span class="number">1</span>]];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">新建　</span><code>fold.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* global hexo */</span></span><br><span class="line"><span class="comment">// Usage: &#123;% fold ???? %&#125; Something &#123;% endfold %&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fold</span> (<span class="params">args, content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = args[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span>(!text) text = <span class="string">&quot;点击显示／隐藏内容&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;div&gt;&lt;div class=&quot;fold_hider&quot;&gt;&lt;div class=&quot;close hider_title&quot;&gt;&#x27;</span> + text + <span class="string">&#x27;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;fold&quot;&gt;\n&#x27;</span> + hexo.render.renderSync(&#123;<span class="attr">text</span>: content, <span class="attr">engine</span>: <span class="string">&#x27;markdown&#x27;</span>&#125;) + <span class="string">&#x27;\n&lt;/div&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.tag.register(<span class="string">&#x27;fold&#x27;</span>, fold, &#123;<span class="attr">ends</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 折叠</span><br><span class="line"><span class="selector-class">.hider_title</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ef4a05</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.close</span>:after &#123;</span><br><span class="line">  content: <span class="string">&quot; ▼&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.open</span>:after &#123;</span><br><span class="line">  content: <span class="string">&quot; ▲&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="35-修改返回顶部按钮图标"><a href="#35-修改返回顶部按钮图标" class="headerlink" title="35. 修改返回顶部按钮图标"></a><span class="section-number">35.</span> <span class="s-fc-hd">修改返回顶部按钮图标</span></h2><p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_partials\widgets.njk</code></p>
<p><span class="f-fw">查找　</span><code>fa fa-arrow-up</code></p>
<p><span class="f-fw">改为　</span> <code>fa fa-chevron-up</code></p>
<br/>

<h2 id="36-文章按更新时间排序"><a href="#36-文章按更新时间排序" class="headerlink" title="36. 文章按更新时间排序"></a><span class="section-number">36.</span> <span class="s-fc-hd">文章按更新时间排序</span></h2><div class="note info"><span class="f-fw">
本节转载自　<a class="s-fc-a" href="http://aiellochan.com/2018/02/13/hexo/Hexo-%E6%96%87%E7%AB%A0%E6%8C%89%E7%85%A7%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F/">Hexo 文章按照更新时间排序</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">查找　</span><code>order_by: -date</code></p>
<p><span class="f-fw">将　</span> <code>-date</code></p>
<p><span class="f-fw">改为　</span> <code>-updated</code></p>
<br/>

<h2 id="37-post-meta-item-修改"><a href="#37-post-meta-item-修改" class="headerlink" title="37. post-meta-item 修改"></a><span class="section-number">37.</span> <span class="s-fc-hd">post-meta-item 修改</span></h2><h3 id="37-1-评论数增加超链接"><a href="#37-1-评论数增加超链接" class="headerlink" title="37.1. 评论数增加超链接"></a>37.1. 评论数增加超链接</h3><p><img data-src="/images/posts/hexo-optimization/hexo-optimization7.png"></p>
<p><strong>以 Valine 为例</strong></p>
<p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\_macro\post.njk</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">span</span> class=&quot;post-meta-item-text&quot;&gt;&#123;&#123; __(&#x27;post<span class="selector-class">.comments_count</span>&#x27;) + __(&#x27;symbol<span class="selector-class">.colon</span>&#x27;) &#125;&#125;&lt;/<span class="selector-tag">span</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization8.png"><br><span class="f-fw">将其移动至</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">a</span> href=&quot;&#123;&#123; url_for(post<span class="selector-class">.path</span>) &#125;&#125;<span class="selector-id">#comments</span>&quot; itemprop=&quot;discussionUrl&quot;&gt;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">后</span><br><img data-src="/images/posts/hexo-optimization/hexo-optimization9.png"></p>
<br/>

<h3 id="37-2-Valine-汉化"><a href="#37-2-Valine-汉化" class="headerlink" title="37.2. Valine 汉化"></a>37.2. Valine 汉化</h3><p><strong>Next 7.7.1+ 把原来的‘评论数’去掉了，现在只显示‘Valine’</strong></p>
<p><span class="f-fw">打开　</span>　<code>\hexo-theme-next\scripts\filters\comment\valine.js</code></p>
<p><span class="f-fw">查找　</span>　<code>$&#123;iconText(&#39;far fa-comment&#39;, &#39;valine&#39;)&#125;</code></p>
<p><span class="f-fw">改为　</span> <code>&lt;i class=&quot;far fa-comment&quot;&gt;&lt;/i&gt;评论数</code></p>
<p><span class="f-fw">若要为评论数增加超链接，则移动至 a 标签后，修改后完整代码：</span> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;post-meta-item&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">&quot;valine&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;#valine-comments&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;discussionUrl&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;far fa-comment&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>评论数</span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;post-comments-count valine-comment-count&quot;</span> <span class="attr">data-xid</span>=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;commentCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h3 id="37-3-去除冒号"><a href="#37-3-去除冒号" class="headerlink" title="37.3. 去除冒号"></a>37.3. 去除冒号</h3><p><img data-src="/images/posts/hexo-optimization/hexo-optimization10.png"></p>
<p><span class="f-fw">打开　</span>　<code>\_data\languages.yml</code></p>
<p><span class="f-fw">查找　</span>　<code>colon</code></p>
<p><span class="f-fw">将　</span> <code>&quot;：&quot;</code></p>
<p><span class="f-fw">改为　</span> <code>&quot; &quot;</code></p>
<br/>

<h2 id="38-归档页英文标点修改"><a href="#38-归档页英文标点修改" class="headerlink" title="38. 归档页英文标点修改"></a><span class="section-number">38.</span> <span class="s-fc-hd">归档页英文标点修改</span></h2><h3 id="38-1-将英文感叹号修改为中文感叹号"><a href="#38-1-将英文感叹号修改为中文感叹号" class="headerlink" title="38.1. 将英文感叹号修改为中文感叹号"></a>38.1. 将英文感叹号修改为中文感叹号</h3><p><span class="f-fw">打开　</span><code>\hexo-theme-next\layout\archive.njk</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(&#x27;cheers.&#x27; + cheers) &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">将　</span> <code>! </code></p>
<p><span class="f-fw">改为　</span> <code>！</code></p>
<br/>

<h3 id="38-2-文本修改"><a href="#38-2-文本修改" class="headerlink" title="38.2. 文本修改"></a>38.2. 文本修改</h3><p><span class="f-fw">打开　</span><code>\hexo-theme-next\languages\zh-CN.yml</code></p>
<p><span class="f-fw">找到对应文本自行修改即可</span></p>
<br/>

<h2 id="39-图片懒加载"><a href="#39-图片懒加载" class="headerlink" title="39. 图片懒加载"></a><span class="section-number">39.</span> <span class="s-fc-hd">图片懒加载</span></h2><h3 id="39-1-Next-主题自带插件"><a href="#39-1-Next-主题自带插件" class="headerlink" title="39.1. Next 主题自带插件"></a>39.1. Next 主题自带插件</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://github.com/theme-next/theme-next-jquery-lazyload">theme-next-jquery-lazyload</a>
</span></div>

<p><span class="f-fw">打开　</span><code>\hexo-theme-next\_config.yml</code></p>
<p><span class="f-fw">查找　</span><code>lazyload: false</code></p>
<p><span class="f-fw">将　</span> <code>false</code></p>
<p><span class="f-fw">改为　</span> <code>true</code></p>
<br/>

<h3 id="39-2-Hexo-插件-①"><a href="#39-2-Hexo-插件-①" class="headerlink" title="39.2. Hexo 插件 ①"></a>39.2. Hexo 插件 ①</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://troyyang.com/2017/08/06/hexo-lazyload-image/">Troy's 博客</a>
</span></div>

<p><span class="f-fw">安装　</span><code>npm install hexo-lazyload-image --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LazyLoad</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">loadingImg:</span> <span class="string">/images/loading.gif</span></span><br></pre></td></tr></table></figure>

<p><strong>onlypost</strong> - 是否仅文章中的图片做懒加载, 如果为 false， 则主题中的其他图片，也会做懒加载，如头像、logo 等任何图片</p>
<p><strong>loadingImg</strong> - 图片未加载时的代替图</p>
<p><span class="f-fw">使用格式　</span> </p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Alt text</span>](<span class="link">imageurl</span>)</span><br></pre></td></tr></table></figure>

<h3 id="39-3-Hexo-插件-②"><a href="#39-3-Hexo-插件-②" class="headerlink" title="39.3. Hexo 插件 ②"></a>39.3. Hexo 插件 ②</h3><div class="note info"><span class="f-fw">
本节参考自　<a class="s-fc-a" href="https://github.com/Robin-front/hexo-lazyload">Robin-front</a>
</span></div>

<p><span class="f-fw">安装　</span><code>npm install hexo-lazyload --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># thumbPath: &#x27;/images/thumb&#x27;</span></span><br><span class="line">  <span class="comment"># className: #optional e.g. .J-lazyload-img</span></span><br><span class="line">  <span class="comment"># loadingImg: #optional eg. /images/loading.png</span></span><br></pre></td></tr></table></figure>

<h2 id="41-本地调用-FontAwesome"><a href="#41-本地调用-FontAwesome" class="headerlink" title="41. 本地调用 FontAwesome"></a><span class="section-number">41.</span> <span class="s-fc-hd">本地调用 FontAwesome</span></h2><p><span class="f-fw">打开文件夹　</span><code>\blog\source</code></p>
<p><span class="f-fw">新建文件夹　</span><code>fontawesome</code></p>
<p><span class="f-fw">下载　</span><code>fontawesome--web</code></p>
<p><span class="f-fw">在 fontawesome 文件夹内放入文件　</span><code>all.min.css</code> <span class="f-fw">　及文件夹　</span><code>webfonts</code></p>
<p><span class="f-fw">打开　</span><code>_config.next.yml</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vendors:</span><br><span class="line">  fontawesome: /fontawesome/all.min.css</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\source\fontawesome\all.min.css</code></p>
<p><span class="f-fw">将　</span><code>..</code></p>
<p><span class="f-fw">改为　</span> <code>.</code></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\base64-fonts\" rel="bookmark">内联引入 base64 字体</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\service-worker\" rel="bookmark">Hexo 部署 Service Worker</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\changyan\" rel="bookmark">免备案使用畅言</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\custom-web-page\" rel="bookmark">Hexo 跳过渲染，创建自定义网页</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\error-launching-git\" rel="bookmark">关于 'error launching git' 的解决方法</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>千灵夙赋
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://qianling.pw/hexo-optimization/" title="Hexo 优化汇总">https://qianling.pw/hexo-optimization/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>　</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="/atom.xml">
          <span class="icon">
            <i class="fa fa-rss"></i>
          </span>

          <span class="label">RSS</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
              <a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># 前端</a>
          </div>

        
  <div class="post-widgets">
    <div class="wpac-rating-container">
      <div id="wpac-rating"></div>
    </div>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/html-pv/" rel="prev" title="通过 HTML 刷浏览量（PV）">
                  <i class="fa fa-chevron-left"></i> 通过 HTML 刷浏览量（PV）
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/style/" rel="next" title="样式汇总">
                  样式汇总 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="valine-comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fab fa-github-alt"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">千灵夙赋</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class=""></i>
      </span>你是第
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>位到访的小伙伴喔
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class=""></i>
      </span>本站已被访问
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>次啦
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
  <script src="https://embed.widgetpack.com/widget.js" async></script>
  <script class="next-config" data-name="rating" type="application/json">{"enable":true,"id":8657,"color":"5bc0de"}</script>
  <script src="/js/third-party/rating.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"zulMeib4pyC6zB1a65OmVtHz-gzGzoHsz","app_key":"TEjUlOUBz3KwSUmDQ35ROxpw","server_url":null,"security":false}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://qianling.pw/hexo-optimization/"}</script>
  <script src="/js/third-party/quicklink.js"></script>


<script class="next-config" data-name="valine" type="application/json">{"enable":true,"appId":"zulMeib4pyC6zB1a65OmVtHz-gzGzoHsz","appKey":"TEjUlOUBz3KwSUmDQ35ROxpw","serverURLs":"https://zulmeib4.lc-cn-n1-shared.com","placeholder":"说点什么好呢~","avatar":"wavatar","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":false,"comment_count":true,"recordIP":false,"enableQQ":true,"requiredFields":[],"el":"#valine-comments","path":"/hexo-optimization/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.valine.el)
    .then(() => NexT.utils.getScript(
      '/js/custom/Valine.min.js',
      { condition: window.Valine }
    ))
    .then(() => {
      new Valine(CONFIG.valine);
    });
});
</script>

</body>
</html>
